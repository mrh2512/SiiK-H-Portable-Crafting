:root{
  --bp:#0b3d91;
  --bp2:#0a347c;
  --ink:rgba(240,250,255,.95);
  --ink2:rgba(240,250,255,.75);
  --ink3:rgba(240,250,255,.55);
  --grid:rgba(255,255,255,.10);
  --grid2:rgba(255,255,255,.06);
  --danger:rgba(255,120,120,.95);
  --good:rgba(145,255,200,.95);
}

*{box-sizing:border-box;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial}
body{margin:0;overflow:hidden;background:transparent}
.hidden{display:none !important}

#app{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
}

.bp-frame{
  width:min(1200px,92vw);
  height:min(720px,86vh);
  position:relative;
  color:var(--ink);
  border-radius:18px;
  overflow:hidden;
  background:
    linear-gradient(0deg, var(--grid) 1px, transparent 1px) 0 0/24px 24px,
    linear-gradient(90deg, var(--grid) 1px, transparent 1px) 0 0/24px 24px,
    linear-gradient(0deg, var(--grid2) 1px, transparent 1px) 0 0/120px 120px,
    linear-gradient(90deg, var(--grid2) 1px, transparent 1px) 0 0/120px 120px,
    radial-gradient(1200px 700px at 20% 10%, rgba(255,255,255,.14), transparent 55%),
    radial-gradient(900px 500px at 90% 90%, rgba(0,0,0,.22), transparent 55%),
    linear-gradient(180deg, var(--bp), var(--bp2));
  box-shadow:0 18px 60px rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.18);
}

.bp-border{
  position:absolute; inset:14px;
  border-radius:14px;
  border:1px dashed rgba(255,255,255,.28);
  pointer-events:none;
}

.bp-header{
  display:flex; align-items:flex-start; gap:16px;
  padding:18px 18px 14px 18px;
  border-bottom:1px solid rgba(255,255,255,.16);
  background:linear-gradient(180deg, rgba(0,0,0,.16), rgba(0,0,0,.02));
}

.bp-title{flex:1}
.bp-title-top{font-size:12px; letter-spacing:.22em; color:var(--ink2)}
.bp-title-main{font-size:26px; letter-spacing:.08em; margin-top:4px; text-transform:uppercase; text-shadow:0 2px 0 rgba(0,0,0,.22)}

.bp-stats{display:flex; gap:10px; align-items:stretch; padding-top:2px}
.stat{
  min-width:88px;
  padding:10px 12px;
  border:1px solid rgba(255,255,255,.18);
  border-radius:12px;
  background:rgba(0,0,0,.10);
}
.stat.wide{min-width:220px}
.stat-label{font-size:11px; letter-spacing:.18em; color:var(--ink2)}
.stat-val{font-size:20px; margin-top:3px}
.stat-sub{font-size:11px; margin-top:6px; color:var(--ink2)}
.progress{
  margin-top:8px;
  height:10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.10);
  overflow:hidden;
}
.progress-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg, rgba(240,250,255,.25), rgba(240,250,255,.85));
}

.bp-close{
  width:42px; height:42px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(0,0,0,.18);
  color:var(--ink);
  cursor:pointer;
  font-size:18px;
}
.bp-close:hover{background:rgba(0,0,0,.28)}

.bp-body{
  display:grid;
  grid-template-columns: 320px 1fr;
  height: calc(100% - 86px);
}

.bp-left{padding:16px 14px 14px 16px; border-right:1px solid rgba(255,255,255,.16)}
.bp-right{padding:16px 16px 14px 16px; position:relative}

.bp-panel-title{font-size:12px; letter-spacing:.22em; color:var(--ink2); margin-bottom:10px}

.category-list{display:flex; flex-direction:column; gap:10px}
.cat{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.08);
  cursor:pointer;
  user-select:none;
}
.cat:hover{background:rgba(0,0,0,.16)}
.cat.active{background:rgba(0,0,0,.22); outline:1px solid rgba(255,255,255,.25)}
.cat-name{font-size:14px}
.cat-count{font-size:12px;color:var(--ink2)}

.toolbar{display:flex; align-items:center; gap:12px; margin-bottom:12px}
.search{
  flex:1;
  padding:12px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.10);
  color:var(--ink);
  outline:none;
}
.search::placeholder{color:rgba(240,250,255,.55)}
.divider{width:1px; height:40px; background:rgba(255,255,255,.16)}

.amount-wrap{display:flex; align-items:center; gap:8px}
.amt-label{font-size:11px; letter-spacing:.18em; color:var(--ink2); margin-right:2px}
.amount{
  width:70px;
  padding:10px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.10);
  color:var(--ink);
  outline:none;
  text-align:center;
}
.amt-btn{
  width:38px;height:38px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.10);
  color:var(--ink);
  cursor:pointer;
  font-size:18px;
}
.amt-btn:hover{background:rgba(0,0,0,.18)}

.recipe-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:12px;
  overflow:auto;
  padding-right:6px;
  height: calc(100% - 64px);
}
.recipe-grid::-webkit-scrollbar{width:8px}
.recipe-grid::-webkit-scrollbar-thumb{background:rgba(255,255,255,.18);border-radius:999px}

.item-icon{
  width:32px; height:32px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.20);
  background:rgba(0,0,0,.10);
  box-shadow:0 10px 18px rgba(0,0,0,.20);
  overflow:hidden;
  position:relative;
  flex:0 0 auto;
}
.item-icon.big{width:42px;height:42px;border-radius:12px}
.item-icon img{width:100%;height:100%;object-fit:cover;display:block}
.item-icon::after{
  content:'';
  position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(255,255,255,.12), transparent 55%);
  pointer-events:none;
}

.recipe{
  padding:12px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.08);
  cursor:pointer;
  transition:transform .06s ease;
  user-select:none;
}
.recipe:hover{background:rgba(0,0,0,.14); transform:translateY(-1px)}
.recipe.locked{opacity:.62}
.r-top{display:flex; gap:10px; align-items:center}
.r-name{font-size:14px; letter-spacing:.04em}
.r-sub{font-size:11px; color:var(--ink2); margin-top:6px; line-height:1.2rem}
.badge{
  display:inline-block;
  margin-top:10px;
  font-size:11px;
  padding:6px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  color:var(--ink2);
}

.details{
  position:absolute;
  left:16px; right:16px; bottom:14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.16);
  padding:14px 14px;
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}

.details-head{display:flex; justify-content:space-between; gap:10px; align-items:flex-start}
.details-titleRow{display:flex; gap:10px; align-items:center}
.details-name{font-size:18px; text-transform:uppercase; letter-spacing:.08em}
.details-meta{margin-top:6px; font-size:12px; color:var(--ink2)}

.craft-btn{
  padding:12px 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(240,250,255,.10);
  color:var(--ink);
  cursor:pointer;
  letter-spacing:.12em;
  font-weight:700;
}
.craft-btn:hover{background:rgba(240,250,255,.16)}
.craft-btn:disabled{opacity:.55; cursor:not-allowed}

.details-body{
  margin-top:12px;
  display:grid;
  grid-template-columns: 1fr 260px;
  gap:12px;
  position:relative;
}

.details-section{
  border:1px solid rgba(255,255,255,.14);
  border-radius:14px;
  padding:10px 10px;
  background:rgba(0,0,0,.08);
}

.details-title{font-size:11px; letter-spacing:.18em; color:var(--ink2); margin-bottom:8px}

.ings{display:flex; flex-direction:column; gap:8px}
.ingRow{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.16);
  padding:8px 10px;
  background:rgba(0,0,0,.06);
}
.ingLeft{display:flex; align-items:center; gap:10px}
.ingName{font-size:12px; color:var(--ink2)}
.ingCount{font-size:12px; color:var(--ink2); letter-spacing:.06em}

.outRow{display:flex; gap:10px; align-items:center}
.out{font-size:13px; color:var(--ink)}

.lock-banner{
  grid-column:1 / -1;
  margin-top:10px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,120,120,.12);
  color:var(--danger);
  font-weight:700;
  letter-spacing:.06em;
}

.bp-footnote{
  margin-top:14px;
  border-top:1px solid rgba(255,255,255,.16);
  padding-top:12px;
  color:var(--ink2);
  font-size:12px;
}
.foot-line{margin-top:6px}

/* Ingredient glow outlines */
.ingRow.good{
  border-color: rgba(145,255,200,.55);
  box-shadow: 0 0 0 1px rgba(145,255,200,.18), 0 0 18px rgba(145,255,200,.18);
}
.ingRow.bad{
  border-color: rgba(255,120,120,.55);
  box-shadow: 0 0 0 1px rgba(255,120,120,.18), 0 0 18px rgba(255,120,120,.18);
}

/* Craft time + ruler progress */
.craft-time{
  margin-top:6px;
  font-size:11px;
  letter-spacing:.18em;
  color:rgba(240,250,255,.75);
}

.ruler{
  margin-top:12px;
  position:relative;
  height:16px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.10);
  overflow:hidden;
}

.ruler-ticks{
  position:absolute; inset:0;
  background:
    repeating-linear-gradient(
      90deg,
      rgba(240,250,255,.18) 0px,
      rgba(240,250,255,.18) 1px,
      transparent 1px,
      transparent 12px
    );
  opacity:.65;
  pointer-events:none;
}

.ruler-fill{
  position:absolute; left:0; top:0; bottom:0;
  width:0%;
  background:linear-gradient(90deg, rgba(240,250,255,.18), rgba(240,250,255,.60));
}

/* Weapon metadata preview */
.meta-body{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.meta-line{
  border:1px solid rgba(255,255,255,.16);
  background:rgba(0,0,0,.08);
  border-radius:14px;
  padding:10px 10px;
  font-size:12px;
  color:rgba(240,250,255,.80);
  letter-spacing:.08em;
}
.meta-line strong{
  color:rgba(240,250,255,.95);
  letter-spacing:.18em;
}

/* Blueprint drawing animation overlay */
.draw-overlay{
  position:absolute;
  inset:0;
  border-radius:14px;
  background:rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.14);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:10px;
  pointer-events:none;
}
.draw-overlay svg{
  width:92%;
  height:58%;
}
.draw-line{
  fill:none;
  stroke:rgba(240,250,255,.85);
  stroke-width:3.0;
  stroke-linecap:round;
  stroke-dasharray:2000;
  stroke-dashoffset:2000;
  animation:draw 1.25s ease forwards;
}
.draw-line:nth-child(2){animation-delay:.06s}
.draw-line:nth-child(3){animation-delay:.12s}
.draw-line:nth-child(4){animation-delay:.18s}
.draw-line:nth-child(5){animation-delay:.24s}
.draw-line:nth-child(6){animation-delay:.30s}

.draw-text{
  font-size:12px;
  letter-spacing:.22em;
  color:rgba(240,250,255,.85);
  text-transform:uppercase;
}

@keyframes draw{
  to{stroke-dashoffset:0}
}
